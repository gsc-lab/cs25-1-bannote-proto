syntax = "proto3";

package bannote.studyroomservice.room.v1;

import "google/protobuf/timestamp.proto";

// ==========================================
// ENUM: 스터디룸 상태
// ==========================================
enum RoomStatus {
  ROOM_STATUS_UNSPECIFIED = 0; // 지정되지 않음
  ROOM_STATUS_VACANT = 1;      // 공실
  ROOM_STATUS_OCCUPIED = 2;    // 입실
}

// ==========================================
// MESSAGE: Room (스터디룸 구조체)
// ==========================================
message Room {
  int64 id = 1;                               // 스터디룸 ID
  string department_code = 2;                 // 학과 코드
  string department_name = 3;                 // 학과 이름
  string name = 4;                            // 스터디룸 이름
  int32 maximum_member = 5;                   // 최대 인원
  RoomStatus status = 6;                      // 스터디룸 상태
  google.protobuf.Timestamp created_at = 7;   // 생성 시각
  google.protobuf.Timestamp updated_at = 8;   // 수정 시각
  int64 created_by = 9;                       // 생성자
}

// ==========================================
// CREATE
// ==========================================
message CreateRoomRequest {
  string department_code = 1;
  string department_name = 2;
  string name = 3;
  int32 maximum_member = 4;
  RoomStatus status = 5;
}

message CreateRoomResponse {
  Room room = 1;
}

// ==========================================
// READ (단건 조회)
// ==========================================
message GetRoomRequest {
  int64 id = 1;
}

message GetRoomResponse {
  Room room = 1;
}

// ==========================================
// LIST (페이지네이션 추가)
// ==========================================
message ListRoomsRequest {
  int32 page = 1;        // 1부터 시작
  int32 size = 2;   // 리미트 없음
}

message ListRoomsResponse {
  repeated Room rooms = 1;   // 해당 페이지 데이터
  int64 total_count = 2;     // 전체 개수
  int32 page = 3;            // 현재 페이지
  int32 size = 4;       // 페이지 크기
}

// ==========================================
// UPDATE
// ==========================================
message UpdateRoomRequest {
  int64 id = 1;
  string department_code = 2;
  string department_name = 3;
  string name = 4;
  int32 maximum_member = 5;
  RoomStatus status = 6;
}

message UpdateRoomResponse {
  Room room = 1;
}

// ==========================================
// DELETE
// ==========================================
message DeleteRoomRequest {
  int64 id = 1;
}

message DeleteRoomResponse {}
